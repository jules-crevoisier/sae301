# VirtualHost pour sae301.mmi24c01.mmi-troyes.fr
# À copier dans /etc/apache2/sites-available/ puis activer (voir deploy.md).

<VirtualHost *:80>
    ServerName sae301.mmi24c01.mmi-troyes.fr

    ProxyPreserveHost On
    ProxyRequests Off

    # API backend (obligatoire avant / pour que /api soit pris en priorité)
    ProxyPass /api http://127.0.0.1:4000/api
    ProxyPassReverse /api http://127.0.0.1:4000/api

    # Frontend Next.js
    ProxyPass / http://127.0.0.1:3001/
    ProxyPassReverse / http://127.0.0.1:3001/

    ErrorLog ${APACHE_LOG_DIR}/sae301-error.log
    CustomLog ${APACHE_LOG_DIR}/sae301-access.log combined
</VirtualHost>
